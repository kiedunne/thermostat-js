
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JS Thermostat</title>
    <link type="text/css" rel="stylesheet" href="./public/style.css">
    <script src="./src/thermostat.js"></script>
    <script src="./jquery-3.3.1.min.js"></script>
</head>

<body>
  <div class='body_container'>

      <div class='control_container'>
        <img class= "thermostat_icon" src=./public/images/thermostat.png>
          <div class='thermo_controls'>
            <img id='temperature-up' class='js_buttons' src="./public/images/plus_js.png">
            <img id='temperature-down'class='js_buttons' src="./public/images/minus_js.png">
            <img id='ps_on' class='js_buttons' src="./public/images/ps_on_js.png">
            <img id='ps_off' class='js_buttons' src="./public/images/ps_off_js.png">
            <img id='ps_off' class='js_buttons' src="./public/images/location_blue_js.png">
          </div>
          <h1 class='thermo_js_text'>JS Thermostat.</h1>
      </div>


    <div class='stats_container'>
      <div class='stats_sub_container_city'>
          <div class='city_temp_degrees'>
            <h1 class='city_text'>Temperature in London: <h1 id="current-temperature"><h1 class='city_text'>°C</h1></h1></h1>
          </div>

        <form id="select-city">
            <input id="current-city" type="text" autocomplete="off" placeholder="Enter a city"></input>
            <br>
            <input type="submit"></input>
        </form>
      </div>

      <div class='stats_sub_container_js_temp'>
        <div class='temp_logic'>
          <div class='js_temp_degrees'>
            <h1 id="temperature"><h1 class='monitor_text'>°C</h1></h1>
          </div>
          <h1 class='monitor_text'id="power-saving-status">powersaver on</h1>
          </div>
      </div>
    </div>

  </div>

      <script>
        $(document).ready(function() {
          $.get('http://api.openweathermap.org/data/2.5/weather?q=London&appid=a3d9eb01d4de82b9b8d0849ef604dbed&units=metric', function(data) {
          $('#current-temperature').text(data.main.temp);
          })
          var thermostat = new Thermostat();
           updateTemperature();

        $('#temperature-up').on('click', function() {
          thermostat.turn_up();
           updateTemperature();
          });

        $('#temperature-down').click(function() {
          thermostat.turn_down();
           updateTemperature();
          });

         $('#reset').click(function() {
           thermostat.reset();
            updateTemperature();
         });

         $('#ps_on').click(function() {
           thermostat.ps_on();
           $('#power-saving-status').text('powersaver on')
            updateTemperature();
         });

         $('#ps_off').click(function() {
           thermostat.ps_off();
           $('#power-saving-status').text('powersaver off')
            updateTemperature();
         });

         function updateTemperature() {
           $('#temperature').text(thermostat.temp);
           thermostat.check_usage();
           $('#temperature').attr('class', thermostat.usage);
           $('#temperature').text(thermostat.temp);
        };

        $('#select-city').submit(function(event) {
          event.preventDefault();
          var city = $('#current-city').val();
          $.get('http://api.openweathermap.org/data/2.5/weather?q=' + city + '&appid=a3d9eb01d4de82b9b8d0849ef604dbed&units=metric', function(data) {
          $('#current-temperature').text(data.main.temp);
          });
        });
      });

    </script>
  </body>
</html>
